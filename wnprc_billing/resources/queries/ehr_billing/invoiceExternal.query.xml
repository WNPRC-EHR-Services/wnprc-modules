<query xmlns="http://labkey.org/data/xml/query">
    <metadata>
        <tables xmlns="http://labkey.org/data/xml">
            <table tableName="invoiceExternal" tableDbType="NOT_IN_DB">
                <javaCustomizer class = "org.labkey.wnprc_billing.WNPRC_InvoiceCustomizer"/>
                <tableTitle>External Invoices for All Billing Runs</tableTitle>
                <buttonBarOptions position="top" includeStandardButtons="true">
                    <includeScript>/clientapi/Ext4.lib.xml</includeScript>
                    <includeScript>/wnprc_billing/DownloadInvoicesButton.js</includeScript>
                    <item text="Download Invoices" insertPosition="end" requiresSelection="true">
                        <onClick>WNPRC_BILLING.Invoices.downloadInvoicesBtn(dataRegion);</onClick>
                    </item>
                </buttonBarOptions>
                <columns>
                    <column columnName="rowId"/>
                    <column columnName="invoiceNumber"/>
                    <column columnName="invoiceRunId"/>
                    <column columnName="accountNumber">
                        <fk>
                            <fkDbSchema>ehr_billing</fkDbSchema>
                            <fkTable>aliases</fkTable>
                            <fkColumnName>alias</fkColumnName>
                        </fk>
                    </column>
                    <column columnName="invoiceSentOn"/>
                    <column columnName="invoiceAmount">
                        <formatString>$###,##0.00</formatString>
                    </column>
                </columns>
            </table>
        </tables>
    </metadata>
</query>